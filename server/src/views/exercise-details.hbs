<h2>Exercise</h2>

<form id="editExerciseForm" method="POST" action="/exercises" class="edit">
    <input type="hidden" name="id" id="editExerciseId" value="{{exercise.id}}">
    <label for="editCategory">Category:</label>
    <input type="text" name="category" id="editCategory" value="{{exercise.category}}">
    <label for="editOrder">Order:</label>
    <input type="text" name="sortOrder" id="editOrder" value="{{exercise.sortOrder}}">
    <label for="editTitle">Title:</label>
    <input type="text" name="title" id="editTitle" value="{{exercise.title}}">
    <label for="editYamlUrl">YAML&nbsp;URL:</label>
    <input type="text" name="yamlUrl" id="editYamlUrl" value="{{exercise.yamlUrl}}">
    <label for="displayFromInput" class="nowrap">Display from:</label>
    <input type="datetime-local" name="displayFromInput" id="displayFromInput" value="{{utcDateTimeToLocal exercise.displayFrom}}">
    <label for="displayUntilInput" class="nowrap">Display until:</label>
    <input type="datetime-local" name="displayUntilInput" id="displayUntilInput" value="{{utcDateTimeToLocal exercise.displayUntil}}">
    <div>
        <input type="string" name="displayFrom" id="displayFrom" hidden >
        <input type="string" name="displayUntil" id="displayUntil" hidden >
    </div>
    <button type="submit">Save</button>
</form>

<script>
    const editExerciseForm = document.getElementById('editExerciseForm');

    editExerciseForm.addEventListener("submit", () => {
        const displayFromInput = document.getElementById('displayFromInput');
        const displayUntilInput = document.getElementById('displayUntilInput');
        const displayFrom = document.getElementById('displayFrom');
        const displayUntil = document.getElementById('displayUntil');

        if (displayFromInput.value) {
            displayFrom.value = new Date(displayFromInput.value).toISOString();
        }

        if (displayUntilInput.value) {
            displayUntil.value = new Date(displayUntilInput.value).toISOString();
        }

        return true;
    });
</script>